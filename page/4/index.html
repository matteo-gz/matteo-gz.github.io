<!doctype html><html lang=en-us><head><meta name=generator content="Hugo 0.117.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>matteo's blog</title><meta name=Description content="This is my cool site"><meta property="og:title" content="matteo's blog"><meta property="og:description" content="This is my cool site"><meta property="og:type" content="website"><meta property="og:url" content="https://matteo-gz.github.io/"><meta property="og:site_name" content="My cool site"><meta name=twitter:card content="summary"><meta name=twitter:title content="matteo's blog"><meta name=twitter:description content="This is my cool site"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://matteo-gz.github.io/><link rel=alternate href=/index.xml type=application/rss+xml title="matteo's blog"><link rel=feed href=/index.xml type=application/rss+xml title="matteo's blog"><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","url":"https:\/\/matteo-gz.github.io\/","inLanguage":"en-us","description":"This is my cool site","name":"matteo's blog"}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="matteo's blog"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/images/Logo_Matteo-100-360x135px.png data-srcset="/images/Logo_Matteo-100-360x135px.png, /images/Logo_Matteo-100-360x135px.png 1.5x, /images/Logo_Matteo-100-360x135px.png 2x" data-sizes=auto alt=/images/Logo_Matteo-100-360x135px.png title=/images/Logo_Matteo-100-360x135px.png>'s blog</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=/about/>About </a><a class=menu-item href=/links/>Bookmarks </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="matteo's blog"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/images/Logo_Matteo-100-360x135px.png data-srcset="/images/Logo_Matteo-100-360x135px.png, /images/Logo_Matteo-100-360x135px.png 1.5x, /images/Logo_Matteo-100-360x135px.png 2x" data-sizes=auto alt=/images/Logo_Matteo-100-360x135px.png title=/images/Logo_Matteo-100-360x135px.png>'s blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=/about/ title>About</a><a class=menu-item href=/links/ title>Bookmarks</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class="page home" data-home=posts><div class=home-profile><div class=home-subtitle><div id=id-1 class=typeit></div></div><div class=links></div></div><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/synergy/>Synergy启动在登录前</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2023-05-06>2023-05-06</time></span></div><div class=content>介绍 Synergy是一个模拟键盘和鼠标的软件，我的win和mac都启动时可以用一套键鼠操控。 mac作为Synergy的客户端时，win作为Synergy的服务端使用。
背景 目前Synergy在登录前软件没有启动,只有登录后启动,导致登录时无法输入密码,因为我的键盘鼠标连接在win上。下面是解决办法
原理 软件在mac未登录前是root的身份运行，登录后才是选择的用户,在root身份下将软件加入mac的Launch Daemons就可以解决了
实操 synergy的存放位置是 /Applications/Synergy.app/Contents/MacOS/synergy
运行命令行启动
open /Applications/Synergy.app/Contents/MacOS/synergy 时,可以看到启动参数 /Applications/Synergy.app/Contents/MacOS/synergyc -f --no-tray --debug INFO --name "mac" "192.168.50.59:24800"
修改为Launch Daemons的配置
&lt;?xml version="1.0" encoding="UTF-8"?> &lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"> &lt;plist version="1.0"> &lt;dict> &lt;key>Label&lt;/key> &lt;string>com.example.hello&lt;/string> &lt;key>ProgramArguments&lt;/key> &lt;array> &lt;string>/Applications/Synergy.app/Contents/MacOS/synergyc&lt;/string> &lt;string>-f&lt;/string> &lt;string>--no-tray&lt;/string> &lt;string>--debug&lt;/string> &lt;string>INFO&lt;/string> &lt;string>--name&lt;/string> &lt;string>mac&lt;/string> &lt;string>192.168.50.59:24800&lt;/string> &lt;/array> &lt;key>KeepAlive&lt;/key> &lt;true/> &lt;/dict> &lt;/plist> ProgramArguments对象下是cli启动参数
然后以root身份 放入 /Library/LaunchDaemons/ 下,文件名随便起一个com.example.synergy.plist
这样重启后,就可以在mac上输入密码,当键盘连接在win上时候，因为synergy已经生效
总结 # 敲root密码 sudo su # 切目录 cd /Library/LaunchDaemons/ #创建文件 touch com.</div><div class=post-footer><a href=/posts/synergy/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/steam/>Steam游戏无法识别北通手柄</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2023-02-21>2023-02-21</time></span></div><div class=content>每当兴冲冲下一个好玩的游戏，进入却发现手柄识别不了，或者识别不全。 一个杂牌的手柄属实是折腾人，网上兜了一圈，方法很多，但是适用自己电脑情况的还是很少。 最佳的解决方案就是买个微软的xbox手柄。
次一点的解决方案就是用软件模拟出xbox360的手柄，然后进入游戏就可以正常游玩了。下面重点写下如何达成
xOutput使用 前提 首先来个前提，游戏必须安装在无中文路径，各种微软的游戏依赖库安装齐全。网络问题的话，下个uu加速器处理下
我自己的电脑系统是win11
我使用的模拟软件是xOutput https://github.com/csutorasa/XOutput
配置 下载安装后，打开xOutput，手柄录入键位映射，把手柄的所有按键都输入一边， 然后方向轴看是否录入是否正确(我遇到一个右键上下的位置对调了，然后这个键位勾选反转就行),接下来下拉绑定选择北通的控制器，然后保存配置。 (这个的使用搜b站的视频比较方便，文字描述这里写不下.)
使用 接下来再关闭，以管理员权限打开xOutput(这点很重要！！)再点击开始,启用这个模拟的控制器
这时一般window的设备管理器，会识别出2个手柄设备，一个是北通自己的原有手柄，另一个是模拟出来的xbox360手柄
此时我们点开steam，通用的手柄管理一般也会识别出2个手柄。
配置steam 这时游戏启用steam手柄输入。
手柄设置那里关闭 playstation，任天堂switch相关。
勾选通用，xbox，xbox扩展支持就行。
这时打开游戏就能完了。如果失败，重启电脑，必须控制软件打开的先后顺序，
先打开 xOutput 以管理员权限,
再打开steam，
再打开游戏。
心得 接下来是坑总结
设备管理器确保是2个，一个北通自带，一个虚拟出来的。我之前安装了ds4windows，勾选了隐藏北通的控制器，导致xOutput失效。
管理员权限运行xOutput这点也很重要
其他软件 x360ce 这个软件我也试过，用起来时灵时不灵。
如果问题还没解决，可以搜下其他的模拟xbox360的软件 https://alternativeto.net/software/x360ce/
具体可以看这篇文章，我就是在这个文章找到xOutput的
推荐 用了steam 这么久，发现2个好用软件，
一个是steam账号切换器 可以方便的管理多个steam账号，但是记住限制切号器的网络，可以用火绒来控制软件的网络
另一个是msi afterburner 可以用来显示游戏的帧率,显卡内存占用等等</div><div class=post-footer><a href=/posts/steam/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/graylog/>Graylog搭建</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2022-12-13>2022-12-13</time></span></div><div class=content>克隆项目 https://github.com/Graylog2/docker-compose
配置文件 cd open-core cp .env.example .env 修改.env #.env GRAYLOG_PASSWORD_SECRET="你的16位密码" # 密钥= echo -n 你的16位密码 | shasum -a 256 GRAYLOG_ROOT_PASSWORD_SHA2="密钥" 修改docker-compose.yml # graylog.environment - 位置 GRAYLOG_HTTP_EXTERNAL_URI: "https://你的域名.com/graylog" 启动 docker-compose up -d
配置域名 sudo vi /etc/hosts
x.x.x.x graylog 配置nginx location /graylog/ { proxy_pass http://graylog:9000/; proxy_redirect off; proxy_http_version 1.1; proxy_set_header Connection ""; proxy_set_header Host $http_host; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Real-IP $remote_addr; proxy_connect_timeout 2s; proxy_read_timeout 90s; proxy_send_timeout 90s; } location /graylog1/ { proxy_pass http://graylog:12201/; proxy_redirect off; proxy_http_version 1.</div><div class=post-footer><a href=/posts/graylog/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/asm/>汇编学习</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2022-09-20>2022-09-20</time></span></div><div class=content>什么是汇编? ruanyifeng-汇编语言入门教程 Decode360&rsquo;s Blog-汇编基础入门知识 汇编学习 学习材料 Princeton大学汇编教程 Assembly1 Assembly2 AssemblyFunctions 这个pdf做的非常浅显易懂
tcoline.com-汇编语言 tcoline.com-汇编语言
这个网站的教程也不错,纯中文
w3c教程 https://www.w3cschool.cn/assembly/
函数调用原理 https://gitbook.coder.cat/function-call-principle/
学习记录 目录 编程语言级别:c语言->汇编语言->机器语言 x86-64汇编介绍 冯诺伊曼架构介绍 主存 寄存器 汇编函数调用过程 主存 0000000000000000 ... TEXT RODATA DATA BSS HEAP STACK ... FFFFFFFFFFFFFFFF 备注 Data Registers
RAX: register accumulator // R"注册"意思 RBX:register base RCX:register count RDX:register data Data Registers item detail
RAX: register accumulator // R"register" x &ldquo;extended&rdquo; [0,63] EAX: extended accumulator // E &ldquo;extended｜enhanced&rdquo; [0,31] AX: accumulator // [0,15] AH :accumulator higher // [8,15] AL :accumulator lower // [0,7] cont.</div><div class=post-footer><a href=/posts/asm/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/gomysql/>golang-mysql包</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2022-09-02>2022-09-02</time></span></div><div class=content>golang原生的mysql包是https://github.com/go-sql-driver/mysql
其中DSN (Data Source Name)格式username:password@protocol(address)/dbname?param=value
字段 介绍 username 数据库账号名 password 数据库密码 protocol 协议,tcp, address 数据库host地址 dbname 数据库名,此项为可选项 param 参数支持多个,且区分大小写 参数 默认 介绍 allowAllFiles false allowCleartextPasswords false allowNativePasswords true allowOldPasswords false charset 常用,字符集 checkConnLiveness true collation utf8mb4_general_ci clientFoundRows false columnsWithAlias false interpolateParams false loc UTC 常用,时区 maxAllowedPacket 4194304 multiStatements false parseTime false readTimeout 0 执行读开始计算时间,超过则中断 rejectReadOnly false serverPubKey none timeout OS default tls false writeTimeout 0 其他参数的填写则设置为系统变量,string要用单引号圈起来且url.QueryEscape处理
设置函数 SetMaxOpenConns 为最大连接数
SetMaxIdleConns 为最大空闲数,SetMaxIdleConns&lt;=SetMaxOpenConns,一般不推荐用</div><div class=post-footer><a href=/posts/gomysql/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/scalablegoschedulerdesigndoc/>Scalable Go Scheduler Design Doc 中文翻译</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span>&nbsp;<span class=post-publish>published on <time datetime=2022-08-04>2022-08-04</time></span></div><div class=content>原文链接：https://golang.org/s/go11sched
以下是原文
Scalable Go Scheduler Design Doc Dmitry Vyukov dvyukov@google.com May 2, 2012 该文档假定您对Go 语言 和当前的 goroutine 调度程序实现有一定的了解。
当前调度程序的问题 当前的 goroutine 调度器限制了用 Go 编写的并发程序的可扩展性，特别是高吞吐量服务器和并行计算程序。 Vtocc 服务器在 8 核机器上最多可使用 70% 的 CPU，而性能分析显示 14% 用于runtime.futex(). 通常，调度程序可能会禁止用户在性能至关重要的情况下使用惯用的细粒度并发。
当前实现有什么问题：
单一全局互斥锁（Sched.Lock）和集中状态。互斥锁保护所有与 goroutine 相关的操作（创建、完成、重新调度等）。
Goroutine (G) 切换 (G.nextg)。工作线程 (M&rsquo;s) 经常在彼此之间切换可运行的 goroutine，这可能会导致延迟增加和额外开销。每个 M 必须能够执行任何可运行的 G，尤其是刚刚创建 G 的 M。
每个M内存缓存（M.mcache）。内存缓存和其他缓存（堆栈分配）与所有 M 相关联，而它们只需要与 M 正在运行的 Go 代码相关联（在 syscall 内部阻塞的 M 不需要 mcache）。运行的 Go 代码的M 与所有 M 之间的比率可以高达 1:100。这会导致过多的资源消耗（每个 MCache 最多可吸收 2M）和较差的数据局部性。</div><div class=post-footer><a href=/posts/scalablegoschedulerdesigndoc/>Read More</a></div></article><ul class=pagination><li class=page-item><span class=page-link><a href=/>1</a></span></li><li class=page-item><span class=page-link><a href=/page/2/>2</a></span></li><li class=page-item><span class=page-link><a href=/page/3/>3</a></span></li><li class="page-item active"><span class=page-link><a href=/page/4/>4</a></span></li><li class=page-item><span class=page-link><a href=/page/5/>5</a></span></li></ul></div></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.117.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2024</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank></a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},data:{"id-1":"This is my cool site"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"id-1":["id-1"]},duration:-1,speed:100}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>